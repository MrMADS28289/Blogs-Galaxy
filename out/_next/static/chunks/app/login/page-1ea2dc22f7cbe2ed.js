(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7100:function(e,t,r){Promise.resolve().then(r.bind(r,9659))},6663:function(e,t,r){"use strict";r.d(t,{Di:function(){return s},IM:function(){return a},LF:function(){return d},NG:function(){return c},PY:function(){return o},Rg:function(){return u},eR:function(){return l},p6:function(){return m},sU:function(){return i}});var n=r(3915);let a=(0,n.cn)(!0),s=(0,n.cn)(null),o=(0,n.cn)(!1),i=(0,n.cn)(null),l=(0,n.cn)(!1),c=(0,n.cn)(null),u=(0,n.cn)(!1),d=(0,n.cn)((()=>{{let e=localStorage.getItem("user");return e?JSON.parse(e):null}})(),(e,t,r)=>{if(t(d,r),r){let e={id:r._id,email:r.email,token:r.token};r.name&&(e.name=r.name),r.image&&(e.image=r.image),r.role&&(e.role=r.role),localStorage.setItem("user",JSON.stringify(e))}else localStorage.removeItem("user")}),m=(0,n.cn)(e=>!!e(d))},9659:function(e,t,r){"use strict";r.d(t,{default:function(){return f}});var n=r(7437),a=r(2265),s=r(7648),o=r(9376),i=r(2964),l=r(6663),c=r(9648),u=r(4438),d=r(3301);let m=(0,r(738).ZF)({apiKey:"AIzaSyAEdvr4ZWZKK97nc3PTnIQrB9GCYkx0RBU",authDomain:"blogs-galaxy.firebaseapp.com",projectId:"blogs-galaxy",storageBucket:"blogs-galaxy.firebasestorage.app",messagingSenderId:"1088353653908",appId:"G-L7SR0Q3WS",measurementId:"1:1088353653908:web:74709849dd55717c305081"}),g=(0,d.v0)(m);var f=()=>{let[e,t]=(0,a.useState)({email:"",password:""}),[r,m]=(0,a.useState)(null),[f,h]=(0,a.useState)(!1),p=(0,o.useRouter)(),[,x]=(0,i.KO)(l.LF),y=r=>{t({...e,[r.target.name]:r.target.value})},w=async t=>{t.preventDefault(),m(null),h(!0);try{let t=await (0,c.pH)(e);x(t),u.Am.success("Logged in successfully!"),p.push("/")}catch(e){u.Am.error(e.message||"Login failed")}finally{h(!1)}},b=async()=>{m(null),h(!0);try{let e=new d.hJ,t=(await (0,d.rh)(g,e)).user,r=await (0,c._g)({uid:t.uid,email:t.email,name:t.displayName,image:t.photoURL});x(r),p.push("/")}catch(e){u.Am.error(e.message||"Google sign-in failed")}finally{h(!1)}};return(0,n.jsx)("div",{className:"flex min-h-screen items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"custom-bg w-full max-w-md space-y-8 rounded-lg p-10",children:[(0,n.jsx)("div",{children:(0,n.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-foreground",children:"Sign in to your account"})}),r&&(0,n.jsx)("div",{className:"mb-4 text-center text-sm text-red-500",children:r}),(0,n.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:w,children:[(0,n.jsxs)("div",{className:"-space-y-px rounded-md shadow-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,n.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"relative block w-full appearance-none rounded-none rounded-t-md border border-orange-300 px-3 py-2 text-gray-900 placeholder:text-gray-500 focus:z-10 focus:border-orange-500 focus:outline-none focus:ring-orange-500 sm:text-sm",placeholder:"Email address",value:e.email,onChange:y})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,n.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full appearance-none rounded-none rounded-b-md border border-orange-300 px-3 py-2 text-gray-900 placeholder:text-gray-500 focus:z-10 focus:border-orange-500 focus:outline-none focus:ring-orange-500 sm:text-sm",placeholder:"Password",value:e.password,onChange:y})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",className:"custom-bg group relative flex w-full justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium text-white hover:text-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-500",disabled:f,children:f?"Signing in...":"Sign in"})})]}),(0,n.jsxs)("div",{className:"relative my-6",children:[(0,n.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,n.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,n.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,n.jsx)("span",{className:"bg-background px-2 text-foreground",children:"Or continue with"})})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"button",onClick:b,className:"custom-bg group relative flex w-full justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium text-white hover:text-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-500",children:"Sign in with Google"})}),(0,n.jsx)("div",{className:"text-center text-sm",children:(0,n.jsx)(s.default,{href:"/register",className:"font-medium text-white hover:text-orange-500",children:"Don't have an account? Register"})})]})})}},9648:function(e,t,r){"use strict";r.d(t,{Nq:function(){return c},_g:function(){return l},a$:function(){return o},pH:function(){return i}});var n=r(4438),a=r(3525);let s="https://blogs-galaxy-server.onrender.com/api",o=async e=>{try{let t=await fetch("".concat(s,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw Error(r.message||"Registration failed");return r}catch(e){throw n.Am.error(e.message||"Registration failed. Please try again."),e}},i=async e=>{try{let t=await fetch("".concat(s,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw Error(r.message||"Login failed");return r}catch(e){throw n.Am.error(e.message||"Login failed. Please check your credentials."),e}},l=async e=>{try{let t=await fetch("".concat(s,"/auth/google-signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw Error(r.message||"Google sign-in failed on backend");return r}catch(e){throw n.Am.error(e.message||"Google sign-in failed. Please try again."),e}},c=async(e,t)=>{try{let r=await fetch("".concat(s,"/auth/profile"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}),n=await r.json();if(!r.ok)throw Error(n.message||"Failed to update user");return n}catch(e){throw n.Am.error(e.message||"Failed to update profile. Please try again."),(0,a.M)(e),e}}},3525:function(e,t,r){"use strict";r.d(t,{M:function(){return a}});var n=r(4438);let a=e=>{let t=(null==e?void 0:e.message)||String(e);if(console.error("Unauthorized error caught:",t),t.includes("401")){let e=new CustomEvent("unauthorized-event");window.dispatchEvent(e),n.Am.error("Your session has expired. Please log in again.")}}}},function(e){e.O(0,[990,964,648,438,147,971,117,744],function(){return e(e.s=7100)}),_N_E=e.O()}]);