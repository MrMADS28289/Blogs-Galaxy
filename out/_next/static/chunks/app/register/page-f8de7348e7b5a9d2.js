(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{8947:function(e,r,t){Promise.resolve().then(t.bind(t,3218))},9376:function(e,r,t){"use strict";var n=t(5475);t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},6663:function(e,r,t){"use strict";t.d(r,{Di:function(){return o},IM:function(){return a},LF:function(){return d},NG:function(){return c},PY:function(){return s},Rg:function(){return u},eR:function(){return l},p6:function(){return m},sU:function(){return i}});var n=t(3915);let a=(0,n.cn)(!0),o=(0,n.cn)(null),s=(0,n.cn)(!1),i=(0,n.cn)(null),l=(0,n.cn)(!1),c=(0,n.cn)(null),u=(0,n.cn)(!1),d=(0,n.cn)((()=>{{let e=localStorage.getItem("user");return e?JSON.parse(e):null}})(),(e,r,t)=>{if(r(d,t),t){let e={id:t._id,email:t.email,token:t.token};t.name&&(e.name=t.name),t.image&&(e.image=t.image),t.role&&(e.role=t.role),localStorage.setItem("user",JSON.stringify(e))}else localStorage.removeItem("user")}),m=(0,n.cn)(e=>!!e(d))},3218:function(e,r,t){"use strict";var n=t(7437),a=t(2265),o=t(7648),s=t(9376),i=t(2964),l=t(6663),c=t(9648),u=t(4438);r.default=()=>{let[e,r]=(0,a.useState)({name:"",email:"",password:""}),[t,d]=(0,a.useState)(null),[m,g]=(0,a.useState)(!1),f=(0,s.useRouter)(),[,h]=(0,i.KO)(l.LF),p=t=>{r({...e,[t.target.name]:t.target.value})},x=async r=>{r.preventDefault(),d(null),g(!0);try{let r=await (0,c.a$)(e);h(r),u.Am.success("Registered successfully!"),f.push("/")}catch(e){u.Am.error(e.message||"Registration failed")}finally{g(!1)}};return(0,n.jsx)("div",{className:"flex min-h-screen items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"custom-bg w-full max-w-md space-y-8 rounded-lg p-10",children:[(0,n.jsx)("div",{children:(0,n.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-foreground",children:"Create a new account"})}),t&&(0,n.jsx)("div",{className:"mb-4 text-center text-sm text-red-500",children:t}),(0,n.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:x,children:[(0,n.jsxs)("div",{className:"-space-y-px rounded-md shadow-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"username",className:"sr-only",children:"Username"}),(0,n.jsx)("input",{id:"username",name:"name",type:"text",autoComplete:"username",required:!0,className:"relative block w-full appearance-none rounded-none rounded-b-md border border-orange-300 px-3 py-2 text-gray-900 placeholder:text-gray-500 focus:z-10 focus:border-orange-500 focus:outline-none focus:ring-orange-500 sm:text-sm",placeholder:"Username",value:e.name,onChange:p})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,n.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"relative block w-full appearance-none rounded-none rounded-b-md border border-orange-300 px-3 py-2 text-gray-900 placeholder:text-gray-500 focus:z-10 focus:border-orange-500 focus:outline-none focus:ring-orange-500 sm:text-sm",placeholder:"Email address",value:e.email,onChange:p})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,n.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"relative block w-full appearance-none rounded-none rounded-b-md border border-orange-300 px-3 py-2 text-gray-900 placeholder:text-gray-500 focus:z-10 focus:border-orange-500 focus:outline-none focus:ring-orange-500 sm:text-sm",placeholder:"Password",value:e.password,onChange:p})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",className:"custom-bg group relative flex w-full justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium text-white hover:text-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-500",disabled:m,children:m?"Registering...":"Register"})})]}),(0,n.jsx)("div",{className:"text-center text-sm",children:(0,n.jsx)(o.default,{href:"/login",className:"font-medium text-white hover:text-orange-500",children:"Already have an account? Sign in"})})]})})}},9648:function(e,r,t){"use strict";t.d(r,{Nq:function(){return c},_g:function(){return l},a$:function(){return s},pH:function(){return i}});var n=t(4438),a=t(3525);let o="https://blogs-galaxy-server.onrender.com/api",s=async e=>{try{let r=await fetch("".concat(o,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(!r.ok)throw Error(t.message||"Registration failed");return t}catch(e){throw n.Am.error(e.message||"Registration failed. Please try again."),e}},i=async e=>{try{let r=await fetch("".concat(o,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(!r.ok)throw Error(t.message||"Login failed");return t}catch(e){throw n.Am.error(e.message||"Login failed. Please check your credentials."),e}},l=async e=>{try{let r=await fetch("".concat(o,"/auth/google-signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(!r.ok)throw Error(t.message||"Google sign-in failed on backend");return t}catch(e){throw n.Am.error(e.message||"Google sign-in failed. Please try again."),e}},c=async(e,r)=>{try{let t=await fetch("".concat(o,"/auth/profile"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw Error(n.message||"Failed to update user");return n}catch(e){throw n.Am.error(e.message||"Failed to update profile. Please try again."),(0,a.M)(e),e}}},3525:function(e,r,t){"use strict";t.d(r,{M:function(){return a}});var n=t(4438);let a=e=>{let r=(null==e?void 0:e.message)||String(e);if(console.error("Unauthorized error caught:",r),r.includes("401")){let e=new CustomEvent("unauthorized-event");window.dispatchEvent(e),n.Am.error("Your session has expired. Please log in again.")}}}},function(e){e.O(0,[964,648,438,971,117,744],function(){return e(e.s=8947)}),_N_E=e.O()}]);