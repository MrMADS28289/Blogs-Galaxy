(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{905:function(e,t,r){Promise.resolve().then(r.bind(r,2246))},2246:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var n=r(7437),s=r(2265),a=r(4688),o=r(2964),l=r(6663),i=r(575),c=e=>{let{blogs:t,error:r,category:a,ItemLayoutComponent:c}=e,u=(0,o.b9)(l.Di);return((0,s.useEffect)(()=>{u(a)},[a,u]),r)?(0,n.jsx)(i.Z,{message:"Error loading blogs: ".concat(r)}):(0,n.jsx)("div",{className:"grid grid-cols-1 gap-8 px-3 lg:grid-cols-2",children:t.length>0?t.filter(Boolean).map(e=>(0,n.jsx)(c,{blog:e},e._id)):(0,n.jsx)("p",{children:"Still finding Blogs for this category."})})},u=r(521),d=r(1994),m=r(9463),g=r(3525),h=r(4438),x=e=>{let{blog:t,className:r}=e,[a,i]=(0,s.useState)(t),[c,x]=(0,s.useState)(!1),[,f]=(0,o.KO)(l.PY),[,b]=(0,o.KO)(l.sU),[,p]=(0,o.KO)(l.eR),[,y]=(0,o.KO)(l.NG),[j,w]=(0,o.KO)(l.LF);(0,s.useEffect)(()=>{i(t),j&&t.likedBy&&x(t.likedBy.some(e=>e._id.toString()===j.id))},[t,j]);let v=async()=>{try{let e=await (0,m.Hp)(a._id);i(e),b(e),f(!0)}catch(e){console.error("Failed to fetch blog for modal:",e),h.Am.error("Failed to load blog details.")}},k=((e,t)=>{let r=e.split(" ");return r.length>t?r.slice(0,t).join(" ")+"...":e})(t.content,100);return(0,n.jsx)(u.E.div,{initial:{scale:0},whileInView:{scale:1},transition:{duration:.5},viewport:{once:!0},className:(0,d.Z)("custom-bg mt-140 flex flex-col items-center justify-between rounded-xl p-6 sm:p-8 min-h-[250px]",r),children:a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex-grow flex flex-col items-center",children:[(0,n.jsx)("h2",{className:"text-center text-2xl font-bold mb-2",children:a.title}),(0,n.jsx)("p",{className:"text-center text-lg mb-4",children:k})]}),(0,n.jsxs)("div",{className:"mt-4 flex w-full items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[(0,n.jsxs)("span",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-1",children:"\uD83D\uDC41️"})," ",a.views||0]}),(0,n.jsxs)("span",{className:"flex cursor-pointer items-center",onClick:async e=>{if(e.stopPropagation(),!j||!j.token){h.Am.error("You must be logged in to like a post.");return}try{let{likes:e,isLiked:t}=await (0,m.Mx)(a._id,j.token,c?"unlike":"like");i(t=>({...t,likes:e})),x(t)}catch(e){console.log(e),(0,g.M)(e),h.Am.error("Failed to update like status.")}},children:[(0,n.jsx)("span",{className:"mr-1",children:c?"\uD83D\uDC4E":"\uD83D\uDC4D"})," ",a.likes||0]}),(0,n.jsx)("span",{className:"flex cursor-pointer items-center",onClick:async e=>{e.stopPropagation();try{let e=await (0,m.tH)(a._id);y({blog:a,comments:e,onCommentAdded:e=>{i(t=>({...t,comments:[...t.comments,e]}))},onCommentAddedSuccess:async()=>{try{let e=await (0,m.Hp)(a._id);i(e)}catch(e){console.error("Failed to re-fetch blog after comment:",e),h.Am.error("Failed to refresh comments.")}}}),p(!0)}catch(e){console.log(e),h.Am.error("Failed to load comments.")}},children:(0,n.jsxs)("span",{className:"mr-1",children:["\uD83D\uDCAC ",(a.comments||[]).length]})})]}),a.content.split(" ").length>100&&(0,n.jsx)(u.E.button,{onClick:v,className:"custom-bg rounded-full px-4 py-2 text-foreground transition-colors hover:text-orange-500",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Read More"})]})]})})},f=r(6442),b=r(9089),p=()=>{let[e,t]=(0,s.useState)(!0),[r,a]=(0,s.useState)(!1),o=()=>{window.pageYOffset<100?(t(!0),a(!1)):(t(!1),a(!0))};return(0,s.useEffect)(()=>(window.addEventListener("scroll",o),()=>{window.removeEventListener("scroll",o)}),[]),(0,n.jsxs)(n.Fragment,{children:[e&&(0,n.jsx)("div",{className:"fixed bottom-4 left-1/2 z-50 -translate-x-1/2",children:(0,n.jsx)("button",{onClick:()=>{let e=window.innerHeight;window.scrollTo({top:window.pageYOffset+.9*e,behavior:"smooth"})},className:"custom-bg flex size-14 animate-[drop-animation_2s_infinite] items-center justify-center rounded-full p-4 text-foreground transition-all duration-300 ease-in-out hover:text-orange-500 focus:outline-none focus:ring-2 focus:ring-white/50",children:(0,n.jsx)(b.NWQ,{className:"h-auto w-full"})})}),r&&(0,n.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,n.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"custom-bg flex size-14 animate-[drop-animation_2s_infinite] items-center justify-center rounded-full p-4 text-foreground transition-all duration-300 ease-in-out hover:text-orange-500 focus:outline-none focus:ring-2 focus:ring-white/50",children:(0,n.jsx)(b.ZTc,{className:"h-auto w-full"})})})]})},y=r(5299),j=r(5198),w=r(3694),v=r(561),k=r(6261),N=r(3334),S=r(3887),E=r(5650),C=r(1307),P=r(7648),T=function(){return(0,n.jsxs)("main",{className:"relative flex min-h-screen min-w-full flex-col items-center justify-center",children:[(0,n.jsx)("div",{className:"absolute inset-0 -z-50 size-full bg-cover bg-center opacity-50",style:{backgroundImage:"url('/background/black_sky.jpg')"}}),(0,n.jsxs)(u.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"custom-bg w-full max-w-lg rounded-xl p-8 text-center shadow-lg",children:[(0,n.jsx)("h2",{className:"mb-4 text-4xl font-bold text-orange-500",children:"404"}),(0,n.jsx)("h3",{className:"mb-4 text-2xl font-bold text-white",children:"You lost in space!"}),(0,n.jsx)("p",{className:"mb-6 text-lg text-gray-300",children:"Sorry, the Category you are looking for does not exist."}),(0,n.jsx)(P.default,{href:"/",children:(0,n.jsx)(u.E.button,{className:"custom-bg rounded-full px-6 py-3 text-lg font-semibold text-foreground transition-colors hover:text-orange-500",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Go back to Home"})})]})]})};let _={ai:y.Z,community:j.Z,creative:w.Z,geography:v.Z,history:k.Z,motivation:N.Z,sports:S.Z,tech:E.Z};var D=e=>{let{params:t}=e,{category:r}=t,[i,u]=(0,s.useState)(1),{blogs:d,loading:m,error:g,totalPages:h}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,[r]=(0,o.KO)(l.Di),[n,a]=(0,s.useState)([]),[i,c]=(0,s.useState)(!0),[u,d]=(0,s.useState)(null),[m,g]=(0,s.useState)(1),[h,x]=(0,s.useState)(0);return(0,s.useEffect)(()=>{async function n(){c(!0),d(null);try{let n="".concat("https://blogs-galaxy-server.onrender.com/api","/blogs?page=").concat(e,"&limit=").concat(t);r&&(n+="&category=".concat(encodeURIComponent(r)));let s=await fetch(n);if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let o=await s.json();if(o&&Array.isArray(o.blogs))a(o.blogs),g(o.totalPages||1),x(o.totalBlogs||0);else throw Error("Unexpected API response format")}catch(e){d(e.message)}finally{c(!1)}}null!==r&&n()},[r,e,t]),{blogs:n,loading:i,error:u,totalPages:m,totalBlogs:h}}(i,10),b=a.c.find(e=>e.link.substring(1)===r);if(!b)return(0,n.jsx)(T,{});let y=_[r];return(0,n.jsxs)("section",{className:"relative w-full",children:[m&&(0,n.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,n.jsx)("div",{className:"animate-pulse text-2xl font-bold text-gray-400",children:"Loading blogs..."})}),(0,n.jsx)("div",{className:"flex h-[70vh] w-full items-center justify-center",children:(0,n.jsx)("div",{className:"relative size-full",children:(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(f.Z,{children:y&&(0,n.jsx)(y,{position:b.position,scale:b.scale})})})})}),(0,n.jsxs)("div",{className:"mt-8 text-center",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold",children:b.label}),b.description&&(0,n.jsx)("p",{className:"mt-2 text-lg text-gray-400",children:b.description})]}),(0,n.jsx)(c,{category:r,ItemLayoutComponent:x,blogs:d,error:g}),(0,n.jsx)(C.Z,{currentPage:i,totalPages:h,onPageChange:e=>{u(e)}}),(0,n.jsx)(p,{})]})}},6663:function(e,t,r){"use strict";r.d(t,{Di:function(){return a},IM:function(){return s},LF:function(){return d},NG:function(){return c},PY:function(){return o},Rg:function(){return u},eR:function(){return i},p6:function(){return m},sU:function(){return l}});var n=r(3915);let s=(0,n.cn)(!0),a=(0,n.cn)(null),o=(0,n.cn)(!1),l=(0,n.cn)(null),i=(0,n.cn)(!1),c=(0,n.cn)(null),u=(0,n.cn)(!1),d=(0,n.cn)((()=>{{let e=localStorage.getItem("user");return e?JSON.parse(e):null}})(),(e,t,r)=>{if(t(d,r),r){let e={id:r._id,email:r.email,token:r.token};r.name&&(e.name=r.name),r.image&&(e.image=r.image),r.role&&(e.role=r.role),localStorage.setItem("user",JSON.stringify(e))}else localStorage.removeItem("user")}),m=(0,n.cn)(e=>!!e(d))},1307:function(e,t,r){"use strict";var n=r(7437);t.Z=e=>{let{currentPage:t,totalPages:r,onPageChange:s}=e,a=[];for(let e=1;e<=r;e++)a.push(e);return(0,n.jsx)("nav",{className:"mt-8 flex justify-center",children:(0,n.jsxs)("ul",{className:"flex items-center -space-x-px h-10 text-base",children:[(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>s(t-1),disabled:1===t,className:"flex items-center justify-center px-4 h-10 ms-0 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:"Previous"})}),a.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>s(e),className:"flex items-center justify-center px-4 h-10 leading-tight ".concat(t===e?"text-blue-600 bg-blue-50 border border-blue-300 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"),children:e})},e)),(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>s(t+1),disabled:t===r,className:"flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:"Next"})})]})})}},6442:function(e,t,r){"use strict";var n=r(7437),s=r(5550),a=r(5903),o=r(8909),l=r(961),i=r(1994),c=r(2265);t.Z=e=>{let{children:t,className:r}=e,[u,d]=(0,c.useState)(null);return(0,c.useEffect)(()=>{d(document.getElementById("main-canvas-container"))},[]),(0,n.jsxs)(l.Xz,{className:(0,i.Z)("pointer-events-auto absolute z-0 size-full",r),shadows:!1,dpr:[1,2],eventSource:u,children:[(0,n.jsx)(c.Suspense,{fallback:null,children:t}),(0,n.jsx)(s.qA,{preset:"dawn"}),(0,n.jsx)(a.z,{autoRotate:!0,makeDefault:!0}),(0,n.jsx)(o.t,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:2})]})}},575:function(e,t,r){"use strict";var n=r(7437),s=r(521),a=r(2744);t.Z=e=>{let{message:t}=e;return(0,n.jsxs)(s.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-center rounded-lg bg-red-500/20 p-4 text-red-500",children:[(0,n.jsx)(a.wr$,{className:"mr-2 text-2xl"}),(0,n.jsx)("p",{className:"text-lg font-semibold",children:t})]})}},3525:function(e,t,r){"use strict";r.d(t,{M:function(){return s}});var n=r(4438);let s=e=>{let t=(null==e?void 0:e.message)||String(e);if(console.error("Unauthorized error caught:",t),t.includes("401")){let e=new CustomEvent("unauthorized-event");window.dispatchEvent(e),n.Am.error("Your session has expired. Please log in again.")}}},9463:function(e,t,r){"use strict";r.d(t,{Hp:function(){return o},Ir:function(){return l},Mx:function(){return s},tH:function(){return a}}),r(3525);let n="https://blogs-galaxy-server.onrender.com/api",s=async(e,t,r)=>{try{let s=await fetch("".concat(n,"/blogs/").concat(e,"/rate"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({action:r})});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));return await s.json()}catch(e){throw e}},a=async e=>{try{let t=await fetch("".concat(n,"/comments/blog/").concat(e));if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return await t.json()}catch(e){throw e}},o=async e=>{try{let t=await fetch("".concat(n,"/blogs/").concat(e));if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return await t.json()}catch(e){throw e}},l=async(e,t)=>{try{let r=await fetch("".concat(n,"/comments"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({text:e.content,blogId:e.blogId,author:e.author})});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return await r.json()}catch(e){throw e}}}},function(e){e.O(0,[699,51,870,689,964,521,648,438,646,551,971,117,744],function(){return e(e.s=905)}),_N_E=e.O()}]);